<?xml version='1.0'?>
<sdf version='1.6'>
  <model name='simple_3dof_arm'>
    <static>false</static>

    <!-- Base link (larger, more visible) -->
    <link name='base_link'>
      <pose>0 0 0.08 0 0 0</pose>
      <inertial>
        <mass>8.0</mass>
        <inertia>
          <ixx>0.2</ixx>
          <iyy>0.2</iyy>
          <izz>0.2</izz>
        </inertia>
      </inertial>
      <visual name='base_visual'>
        <cast_shadows>1</cast_shadows>
        <geometry>
          <cylinder>
            <radius>0.20</radius>
            <length>0.16</length>
          </cylinder>
        </geometry>
        <material>
          <script>
            <uri>file://media/materials/scripts/gazebo.material</uri>
            <name>Gazebo/Black</name>
          </script>
        </material>
      </visual>
      <collision name='base_collision'>
        <geometry>
          <cylinder>
            <radius>0.20</radius>
            <length>0.16</length>
          </cylinder>
        </geometry>
      </collision>
      
      <!-- Base platform visual -->
      <visual name='base_platform'>
        <pose>0 0 -0.1 0 0 0</pose>
        <cast_shadows>1</cast_shadows>
        <geometry>
          <cylinder>
            <radius>0.25</radius>
            <length>0.04</length>
          </cylinder>
        </geometry>
        <material>
          <script>
            <uri>file://media/materials/scripts/gazebo.material</uri>
            <name>Gazebo/Grey</name>
          </script>
        </material>
      </visual>
    </link>

    <!-- Shoulder link (MUCH LARGER - main arm segment) -->
    <link name='shoulder_link'>
      <inertial>
        <mass>3.5</mass>
        <inertia>
          <ixx>0.05</ixx>
          <iyy>0.05</iyy>
          <izz>0.05</izz>
        </inertia>
      </inertial>
      
      <!-- Joint connector visual -->
      <visual name='shoulder_joint_visual'>
        <pose>0 0 0 0 0 0</pose>
        <cast_shadows>1</cast_shadows>
        <geometry>
          <cylinder>
            <radius>0.08</radius>
            <length>0.12</length>
          </cylinder>
        </geometry>
        <material>
          <script>
            <uri>file://media/materials/scripts/gazebo.material</uri>
            <name>Gazebo/Red</name>
          </script>
        </material>
      </visual>
      
      <!-- Main arm segment visual -->
      <visual name='shoulder_visual'>
        <pose>0 0 0.35 0 0 0</pose>
        <cast_shadows>1</cast_shadows>
        <geometry>
          <box>
            <size>0.15 0.12 0.7</size>
          </box>
        </geometry>
        <material>
          <script>
            <uri>file://media/materials/scripts/gazebo.material</uri>
            <name>Gazebo/Yellow</name>
          </script>
        </material>
      </visual>
      <collision name='shoulder_collision'>
        <pose>0 0 0.35 0 0 0</pose>
        <geometry>
          <box>
            <size>0.15 0.12 0.7</size>
          </box>
        </geometry>
      </collision>
    </link>

    <!-- Elbow link (LARGER - forearm) -->
    <link name='elbow_link'>
      <inertial>
        <mass>2.5</mass>
        <inertia>
          <ixx>0.03</ixx>
          <iyy>0.03</iyy>
          <izz>0.03</izz>
        </inertia>
      </inertial>
      
      <!-- Elbow joint connector -->
      <visual name='elbow_joint_visual'>
        <pose>0 0 0 0 0 0</pose>
        <cast_shadows>1</cast_shadows>
        <geometry>
          <cylinder>
            <radius>0.07</radius>
            <length>0.14</length>
          </cylinder>
        </geometry>
        <material>
          <script>
            <uri>file://media/materials/scripts/gazebo.material</uri>
            <name>Gazebo/Blue</name>
          </script>
        </material>
      </visual>
      
      <!-- Forearm visual -->
      <visual name='elbow_visual'>
        <pose>0 0 0.30 0 0 0</pose>
        <cast_shadows>1</cast_shadows>
        <geometry>
          <box>
            <size>0.12 0.10 0.6</size>
          </box>
        </geometry>
        <material>
          <script>
            <uri>file://media/materials/scripts/gazebo.material</uri>
            <name>Gazebo/Green</name>
          </script>
        </material>
      </visual>
      <collision name='elbow_collision'>
        <pose>0 0 0.30 0 0 0</pose>
        <geometry>
          <box>
            <size>0.12 0.10 0.6</size>
          </box>
        </geometry>
      </collision>
    </link>

    <!-- Wrist / end link (LARGER with visible camera) -->
    <link name='wrist_link'>
      <inertial>
        <mass>1.0</mass>
        <inertia>
          <ixx>0.01</ixx>
          <iyy>0.01</iyy>
          <izz>0.01</izz>
        </inertia>
      </inertial>
      
      <!-- Wrist joint connector -->
      <visual name='wrist_joint_visual'>
        <pose>0 0 0 0 0 0</pose>
        <cast_shadows>1</cast_shadows>
        <geometry>
          <cylinder>
            <radius>0.06</radius>
            <length>0.10</length>
          </cylinder>
        </geometry>
        <material>
          <script>
            <uri>file://media/materials/scripts/gazebo.material</uri>
            <name>Gazebo/Purple</name>
          </script>
        </material>
      </visual>
      
      <!-- Wrist body -->
      <visual name='wrist_visual'>
        <pose>0 0 0.10 0 0 0</pose>
        <cast_shadows>1</cast_shadows>
        <geometry>
          <sphere>
            <radius>0.08</radius>
          </sphere>
        </geometry>
        <material>
          <script>
            <uri>file://media/materials/scripts/gazebo.material</uri>
            <name>Gazebo/Orange</name>
          </script>
        </material>
      </visual>
      
      <!-- Camera housing visual -->
      <visual name='camera_housing'>
        <pose>0 0 0.15 0 0 0</pose>
        <cast_shadows>1</cast_shadows>
        <geometry>
          <box>
            <size>0.08 0.06 0.04</size>
          </box>
        </geometry>
        <material>
          <script>
            <uri>file://media/materials/scripts/gazebo.material</uri>
            <name>Gazebo/Black</name>
          </script>
        </material>
      </visual>
      
      <collision name='wrist_collision'>
        <geometry>
          <sphere>
            <radius>0.08</radius>
          </sphere>
        </geometry>
      </collision>

      <!-- Camera sensor mounted on wrist_link -->
      <sensor name='wrist_camera' type='camera'>
        <always_on>1</always_on>
        <update_rate>30</update_rate>
        <pose>0 0 0.15 0 0 0</pose>
        <camera>
          <horizontal_fov>0.785398</horizontal_fov>
          <image>
            <width>640</width>
            <height>480</height>
            <format>R8G8B8</format>
          </image>
          <clip>
            <near>0.01</near>
            <far>100</far>
          </clip>
        </camera>
        <visualize>true</visualize>
      </sensor>
    </link>

    <!-- LARGER two-finger gripper (much more visible) -->
    <link name='left_finger'>
      <inertial>
        <mass>0.2</mass>
        <inertia>
          <ixx>0.001</ixx>
          <iyy>0.001</iyy>
          <izz>0.001</izz>
        </inertia>
      </inertial>
      <visual name='lf_visual'>
        <pose>0.10 0 0 0 0 0</pose>
        <cast_shadows>1</cast_shadows>
        <geometry>
          <box>
            <size>0.14 0.04 0.20</size>
          </box>
        </geometry>
        <material>
          <script>
            <uri>file://media/materials/scripts/gazebo.material</uri>
            <name>Gazebo/White</name>
          </script>
        </material>
      </visual>
      <collision name='lf_collision'>
        <pose>0.10 0 0</pose>
        <geometry>
          <box>
            <size>0.14 0.04 0.20</size>
          </box>
        </geometry>
      </collision>
    </link>
    <link name='right_finger'>
      <inertial>
        <mass>0.2</mass>
        <inertia>
          <ixx>0.001</ixx>
          <iyy>0.001</iyy>
          <izz>0.001</izz>
        </inertia>
      </inertial>
      <visual name='rf_visual'>
        <pose>-0.10 0 0 0 0 0</pose>
        <cast_shadows>1</cast_shadows>
        <geometry>
          <box>
            <size>0.14 0.04 0.20</size>
          </box>
        </geometry>
        <material>
          <script>
            <uri>file://media/materials/scripts/gazebo.material</uri>
            <name>Gazebo/White</name>
          </script>
        </material>
      </visual>
      <collision name='rf_collision'>
        <pose>-0.10 0 0</pose>
        <geometry>
          <box>
            <size>0.14 0.04 0.20</size>
          </box>
        </geometry>
      </collision>
    </link>

    <!-- Joints -->
    <joint name='joint_base' type='revolute'>
      <parent>base_link</parent>
      <child>shoulder_link</child>
      <pose>0 0 0 0 0 0</pose>
      <axis>
        <xyz>0 0 1</xyz>
        <limit>
          <lower>-3.14159</lower>
          <upper>3.14159</upper>
        </limit>
        <dynamics>
          <damping>0.5</damping>
        </dynamics>
      </axis>
    </joint>

    <joint name='joint_shoulder' type='revolute'>
      <parent>shoulder_link</parent>
      <child>elbow_link</child>
      <pose>0 0 0 0 0 0</pose>
      <axis>
        <xyz>0 1 0</xyz>
        <limit>
          <lower>-1.57</lower>
          <upper>1.57</upper>
        </limit>
        <dynamics>
          <damping>0.2</damping>
        </dynamics>
      </axis>
    </joint>

    <joint name='joint_elbow' type='revolute'>
      <parent>elbow_link</parent>
      <child>wrist_link</child>
      <pose>0 0 0 0 0 0</pose>
      <axis>
        <xyz>0 1 0</xyz>
        <limit>
          <lower>-1.57</lower>
          <upper>1.57</upper>
        </limit>
        <dynamics>
          <damping>0.2</damping>
        </dynamics>
      </axis>
    </joint>

    <!-- Fixed joints for fingers to wrist -->
    <joint name='joint_left_finger' type='fixed'>
      <parent>wrist_link</parent>
      <child>left_finger</child>
      <pose>0 0.06 0.15 0 0 0</pose>
    </joint>
    <joint name='joint_right_finger' type='fixed'>
      <parent>wrist_link</parent>
      <child>right_finger</child>
      <pose>0 -0.06 0.15 0 0 0</pose>
    </joint>

    <!-- Gazebo ROS Control Plugin -->
    <plugin name="gazebo_ros_control" filename="libgazebo_ros_control.so">
      <robotNamespace>/simple_3dof_arm</robotNamespace>
      <robotSimType>gazebo_ros_control/DefaultRobotHWSim</robotSimType>
    </plugin>

    <!-- Transmissions for ROS control -->
    <transmission name="trans_base">
      <type>transmission_interface/SimpleTransmission</type>
      <joint name="joint_base">
        <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
      </joint>
      <actuator name="motor_base">
        <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
        <mechanicalReduction>1</mechanicalReduction>
      </actuator>
    </transmission>

    <transmission name="trans_shoulder">
      <type>transmission_interface/SimpleTransmission</type>
      <joint name="joint_shoulder">
        <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
      </joint>
      <actuator name="motor_shoulder">
        <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
        <mechanicalReduction>1</mechanicalReduction>
      </actuator>
    </transmission>

    <transmission name="trans_elbow">
      <type>transmission_interface/SimpleTransmission</type>
      <joint name="joint_elbow">
        <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
      </joint>
      <actuator name="motor_elbow">
        <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
        <mechanicalReduction>1</mechanicalReduction>
      </actuator>
    </transmission>

  </model>
</sdf>
